(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(48)},39:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),o=n.n(c),u=n(5),i=n(22),l=(n(39),n(2)),s=n(3),m=n(6),p=n(4),d=n(7),f=n(15),E=n.n(f),h=n(23),v=n(24),b=n.n(v),O=function(e){return{type:"SET_CART_ITEMS",payload:e}},C=n(25),y=n.n(C),j=(n(42),n(16));var g=function(e){return e.cart.items},T=function(e){return e.cart.sort},S=Object(j.a)(T,g,function(e,t){var n=e.sortBy,r=e.order;return""===n?t:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(e,t){return t.map(function(e,t){return{el:e,i:t}}).sort(function(t,n){var r=e(t.el,n.el);return 0!==r?r:t.i-n.i}).map(function(e){return e.el})}(function(t,r){return t[e]>r[e]?n?-1:1:t[e]<r[e]?n?1:-1:0},t)}(n,t,"DESC"===r)}),_=Object(j.a)(function(e,t){return t},g,function(e,t){return t.find(function(t){return t.id===e})}),w=(n(43),function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).decreaseHandler=function(){var e=n.props,t=e.value,r=e.onDecrease;t>e.min&&r()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onIncrease,n=e.value;return a.a.createElement("div",{className:"qty-switcher"},a.a.createElement("button",{onClick:this.decreaseHandler},"-"),a.a.createElement("span",{className:"qty-switcher__value"},n),a.a.createElement("button",{onClick:t},"+"))}}]),t}(a.a.PureComponent));w.defaultProps={min:1};var I=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).removeHandler=function(){var e=n.props,t=e.id;(0,e.remove)(t)},n.increaseCountHandler=function(){var e=n.props,t=e.id;(0,e.increaseCount)(t)},n.decreaseCountHandler=function(){var e=n.props,t=e.id;(0,e.decreaseCount)(t)},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.count,a=e.price;return r.createElement("tr",null,r.createElement("td",null,t),r.createElement("td",null,r.createElement(w,{value:n,onDecrease:this.decreaseCountHandler,onIncrease:this.increaseCountHandler})),r.createElement("td",null,a),r.createElement("td",null,r.createElement("button",{onClick:this.removeHandler},"X")))}}]),t}(r.PureComponent),R=Object(u.b)(function(e,t){var n=t.id,r=_(e,n);return{name:r.name,count:r.count,price:r.price}},{remove:function(e){return{type:"REMOVE_CART_ITEM",payload:e}},increaseCount:function(e){return{type:"INCREASE_COUNT",payload:e}},decreaseCount:function(e){return{type:"DECREASE_COUNT",payload:e}}})(I),N=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).sort=function(e){var t=n.props,r=t.toggleSortingOrder,a=t.changeSortingField;t.sort.sortBy===e?r():a(e)},n.getColumnClassnames=function(e){var t=n.props.sort,r=t.sortBy,a=t.order;return y()({active:r===e},{desc:"DESC"===a},{asc:"ASC"===a})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.items;return r.createElement("table",{className:"cart-items-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{onClick:function(){return e.sort("name")},className:this.getColumnClassnames("name")},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"),r.createElement("th",{onClick:function(){return e.sort("count")},className:this.getColumnClassnames("count")},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),r.createElement("th",{onClick:function(){return e.sort("price")},className:this.getColumnClassnames("price")},"\u0426\u0435\u043d\u0430"),r.createElement("th",null))),r.createElement("tbody",null,t.map(function(e){var t=e.id;return r.createElement(R,{id:t,key:t})})))}}]),t}(r.PureComponent),D=Object(u.b)(function(e){return{items:S(e),sort:T(e)}},{changeSortingField:function(e){return{type:"SET_SORTING_FIELD",payload:e}},toggleSortingOrder:function(){return{type:"TOGGLE_SORTING_ORDER"}}})(N),k=n(11),A=(n(44),function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={name:"",price:"",count:"1"},n.handleInput=function(e){var t=e.currentTarget,r=t.name,a=t.value;n.setState(Object(k.a)({},r,a))},n.addProduct=function(e){var t=n.state,r=t.name,a=t.price,c=t.count;e.preventDefault(),r&&a&&(n.props.addToCart(r,Number(a),Number(c)),n.setState({name:"",price:"",count:"1"}))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.price,a=e.count;return r.createElement("form",{onSubmit:this.addProduct,className:"product-form"},r.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430:",r.createElement("input",{type:"text",value:t,name:"name",onChange:this.handleInput})),r.createElement("label",null,"\u0426\u0435\u043d\u0430:",r.createElement("input",{type:"number",value:n,name:"price",onChange:this.handleInput})),r.createElement("label",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:",r.createElement("input",{type:"number",value:a,name:"count",onChange:this.handleInput})),r.createElement("button",{type:"submit"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))}}]),t}(r.PureComponent)),M=Object(u.b)(null,{addToCart:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{type:"ADD_CART_ITEM",payload:{id:b()(),name:e,price:t,count:n}}}})(A),G=(n(45),Object(u.b)(null,{loadItems:function(){return function(){var e=Object(h.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/items.json",{headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()});case 2:n=e.sent,t(O(n));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}})(function(e){var t=e.loadItems;return r.createElement("div",{className:"cart"},r.createElement("div",null,r.createElement(D,null)),r.createElement("div",{className:"cart-actions"},r.createElement("button",{type:"button",onClick:t},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430..."),r.createElement(M,null)))})),H=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(G,null)}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=n(1),P=n(26),x=n(27),F=n(17),L=n(28),U=n.n(L),W=n(10),q=n(29),J={sortBy:"",order:"DESC"},V=Object(B.combineReducers)({items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CART_ITEMS":return t.payload;case"REMOVE_CART_ITEM":return e.filter(function(e){return e.id!==t.payload});case"ADD_CART_ITEM":return[].concat(Object(q.a)(e),[t.payload]);case"INCREASE_COUNT":return e.map(function(e){return e.id===t.payload?Object(W.a)({},e,{count:e.count+1}):e});case"DECREASE_COUNT":return e.map(function(e){return e.id===t.payload?Object(W.a)({},e,{count:e.count-1}):e});default:return e}},sort:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORTING_FIELD":return{sortBy:t.payload,order:"DESC"};case"TOGGLE_SORTING_ORDER":return Object(W.a)({},e,{order:"DESC"===e.order?"ASC":"DESC"});default:return e}}}),X=Object(B.combineReducers)({cart:V}),$={key:"redux-cart",storage:U.a};var z=function(){var e=Object(F.a)($,X),t=Object(B.createStore)(e,Object(P.composeWithDevTools)(Object(B.applyMiddleware)(x.a)));return{store:t,persistor:Object(F.b)(t)}}(),K=z.store,Q=z.persistor;o.a.render(a.a.createElement(u.a,{store:K},a.a.createElement(i.a,{loading:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",persistor:Q},a.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.44f87149.chunk.js.map